name: jrosarybibleapp
base: core22
version: '1.2.4'
summary: A simple Bible app. # 79 char long summary
description: |
  A simple Bible app. This projects goal is to promote spiritual health, and to allow each person to study the bible and come to their own conclusion about their faith.

grade: stable
confinement: strict

architectures:
  - build-for: [amd64]
    build-on: [amd64]
  - build-for: [arm64]
    build-on: [arm64]
apps:
  rosary:
    command: bin/rosary
    extensions: [gnome]
    desktop: usr/share/applications/rosary.desktop

parts:
  prep:
    plugin: dump
    source:
      - on amd64 to amd64: https://github.com/RoseBlume/Rosary/releases/download/v1.2.4/rosary_1.2.4_amd64.deb
      - on arm64 to arm64: https://github.com/RoseBlume/Rosary/releases/download/v1.2.4/rosary_1.2.4_arm64.deb
    source-type: deb
    override-pull: |
      set -eu
      craftctl default
      sed -i -e "s|Icon=rosary|Icon=/usr/share/icons/hicolor/32x32/apps/rosary.png|g" usr/share/applications/rosary.desktop
    organize:
      usr/bin/rosary: bin/rosary
    stage-packages:
      - libwebkit2gtk-4.1-0
      - libglu1-mesa
      - libsoup-3.0-0
      - freeglut3
